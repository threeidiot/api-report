sudo: false

language: php

php:
  - 7.1
  - 7.2

install:
  - travis_retry composer self-update -d api
  - travis_retry composer require --no-update satooshi/php-coveralls -d api
  - travis_retry composer install --no-interaction --prefer-dist -d api

script:
  # config laravel env
  - cp api/.env.example api/.env
  - php api/artisan key:generate
  # Unit test
  - travis_wait ./api/vendor/bin/phpunit --verbose --coverage-clover api/build/logs/clover.xml -c api/phpunit.xml

after_success:
- travis_retry php api/vendor/bin/coveralls
